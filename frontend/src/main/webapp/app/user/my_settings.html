<ui-loading *ngIf="wait"></ui-loading>

<section *ngIf="!wait">
    <div class="page-header page-header-first">
        <h2 class="c-pagetitle">
            _L10N_(blockName.mySettings)
        </h2>
    </div>

    <ui-panel [title]="'_L10N_(mySettings.blockName.properties)'">
        <div #body>
            <div class="row">
                <ui-cell title="_L10N_(mySettings.blockName.login)">
                    <div #body class="c-stats__cell-overflowed">
                        {{userSettings.email}}
                    </div>
                </ui-cell>
                <ui-cell title="_L10N_(agencyAccount.user.firstName)">
                    <div #body class="c-stats__cell-overflowed">
                        {{userSettings.firstName}}
                    </div>
                </ui-cell>
                <ui-cell title="_L10N_(agencyAccount.user.lastName)">
                    <div #body class="c-stats__cell-overflowed">
                        {{userSettings.lastName}}
                    </div>
                </ui-cell>
            </div>
        </div>
    </ui-panel>

    <form (submit)="doSubmit($event)">
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group" [ngClass]="{'has-error':errors.oldPassword}">
                    <label>_L10N_(agencyAccount.user.oldPassword)
                        <sup class="h-required"><ui-icon [icon]="'asterisk'" [fw]="true"></ui-icon></sup>
                    </label>
                    <div>
                        <input [(ngModel)]="oldPassword" name="oldPassword" type="password" placeholder="_L10N_(agencyAccount.user.oldPassword)" class="form-control">
                    </div>
                    <p *ngFor="let error of errors.oldPassword" class="help-block">{{error}}</p>
                </div>

                <div class="form-group" [ngClass]="{'has-error':errors.newPassword}">
                    <label>_L10N_(agencyAccount.user.newPassword)
                        <sup class="h-required"><ui-icon [icon]="'asterisk'" [fw]="true"></ui-icon></sup>
                    </label>
                    <div>
                        <input [(ngModel)]="newPassword" name="newPassword" type="password" placeholder="_L10N_(agencyAccount.user.newPassword)" class="form-control">
                    </div>
                    <p *ngFor="let error of errors.newPassword" class="help-block">{{error}}</p>
                </div>

                <div class="form-group" [ngClass]="{'has-error':errors.confirmNewPassword}">
                    <label>_L10N_(agencyAccount.user.confirmNewPassword)
                        <sup class="h-required"><ui-icon [icon]="'asterisk'" [fw]="true"></ui-icon></sup>
                    </label>
                    <div>
                        <input [(ngModel)]="confirmNewPassword" name="confirmNewPassword" type="password" placeholder="_L10N_(agencyAccount.user.confirmNewPassword)" class="form-control">
                    </div>
                    <p *ngFor="let error of errors.confirmNewPassword" class="help-block">{{error}}</p>
                </div>
            </div>
        </div>

        <p *ngIf="notificationMessage && !oldPassword && !newPassword && !confirmNewPassword"
           class="help-block" style="color: green">{{notificationMessage}}</p>

        <div class="row">
            <div class="col-sm-12">
                <button [disabled]="waitSubmit" type="submit" class="btn btn-primary">
                    <ui-icon *ngIf="waitSubmit" [fw]="true" [spin]="true" [icon]="'spinner'"></ui-icon>
                    _L10N_(button.save)
                </button>
            </div>
        </div>
    </form>

</section>